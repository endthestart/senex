{% extends 'base.html' %}
{% load i18n %}
{% load static from staticfiles %}
{% load currency_filters %}
{% load thumbnail %}

{% block title %}{{ product.name }}{% endblock %}

{% block content %}
    {% if not cart.num_items %}
        <div class="sixteen columns"><h4>{% trans "Your shopping cart is empty." %}</h4></div>
    {% else %}
        <div class="sixteen columns"><h4>{% trans "Shopping Cart" %}</h4></div>
        <div class="ten columns">
        <div>{% trans "Cart Items" %}</div>
        <ul>
    {% for cart_item in cart_items %}
        <li>
            <div class="cart-image"><img src="{% thumbnail cart_item.product.main_image.image 100x75 crop %}" alt="product image" /></div>
            <div class="inline-form">
                <form class="inline-form" id="form-{{ cart_item.id }}" action="{% url 'cart_quantity' %}" method="post">{% csrf_token %}
                <input type="hidden" name="cart_item" value="{{ cart_item.id }}" />
                <input style="width: 30px; display: inline;" type="text" name="quantity" id="id_quantity" value="{{ cart_item.quantity }}" />
                <input type="submit" id="id_update_submit" value="{% trans 'Update' %}" />
            </form>
             <form class="inline-form" action="{% url 'cart_remove' %}" method="post">{% csrf_token %}
                <input type="hidden" name="cart_item" value="{{ cart_item.id }}" />
                <input type="submit" value="{% trans 'Remove' %}" />
            </form>
            <div class="cart-item-description"><a href="{{cart_item.product.get_absolute_url}}">{{ cart_item.description }}</a></div>
            <div class="cart-item-price">{{ cart_item.unit_price|currency }}</div>
            </div>
            <div class="cart-item-line-price">{{ cart_item.line_total|currency }}</div>

        </li>
    {% endfor %}
        </ul>
    </div>
    <div class="six columns cart-summary">
        <h4>Cart Summary</h4>
        <hr />
        <h5>{{ cart.num_items }} Item{{ cart.num_items|pluralize }}</h5>
        <hr />
        <h5>Subtotal: {{ cart.total_price|currency }}</h5>
        <hr />
        <a href="{% url 'checkout_start' %}" class="button">{% trans "Check out" %}</a>
    </div>
{% endif %}
{% endblock %}
